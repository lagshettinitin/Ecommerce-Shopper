<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mobile Preview - Scaled Desktop Layout</title>
  <style>
    :root{
      --frame-w: 375px; /* typical mobile width */
      --frame-h: 812px; /* typical iPhone 12/13/14 height */
      --base-w: 1280;   /* your desktop design width */
    }
    html, body{
      height: 100%;
      margin: 0;
      background: #0f0f10;
      display: grid;
      place-items: center;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    }

    /* Device frame */
    .device{
      width: var(--frame-w);
      height: var(--frame-h);
      background: #111;
      border-radius: 42px;
      box-shadow: 0 30px 80px rgba(0,0,0,.6), 0 0 0 10px #1a1a1a inset;
      padding: 18px 12px;
      position: relative;
      overflow: hidden;
      display: flex;
      align-items: stretch;
      justify-content: center;
    }
    /* Camera notch (simple) */
    .notch{
      position: absolute; top: 8px; left: 50%; transform: translateX(-50%);
      width: 160px; height: 20px; background: #000; border-bottom-left-radius: 14px; border-bottom-right-radius: 14px;
      box-shadow: 0 2px 6px rgba(0,0,0,.5);
      z-index: 2;
    }

    .screen{
      background: #fff;
      width: 100%; height: 100%;
      border-radius: 28px;
      overflow: hidden;
      position: relative;
    }

    /* Scaled iframe container */
    .scaled-wrap{
      width: 100%; height: 100%;
      overflow: auto; /* scroll inside device */
      -webkit-overflow-scrolling: touch;
      background: #f6f7f9;
      position: relative;
    }

    /* The actual site is rendered in the iframe at desktop width then scaled down */
    iframe#preview{
      width: calc(var(--base-w) * 1px);
      height: 1000px; /* temporary, JS will adjust */
      border: 0;
      transform-origin: top left;
      display: block;
      background: #fff;
    }

    .hint{
      color: #c9c9c9; font-size: 12px; margin-top: 16px; text-align: center; opacity: .8;
    }

    @media (max-width: 420px){
      :root{ --frame-w: calc(100vw - 24px); }
    }
  </style>
</head>
<body>
  <div class="device" id="device">
    <div class="notch"></div>
    <div class="screen">
      <div class="scaled-wrap" id="wrap">
        <iframe id="preview" src="/"></iframe>
      </div>
    </div>
  </div>
  <div class="hint">Preview shows your desktop layout proportionally scaled to fit a mobile frame (375Ã—812). Use the mouse wheel/touch to scroll.</div>

  <script>
    (function(){
      const BASE_W = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--base-w')) || 1280;
      const device = document.getElementById('device');
      const wrap = document.getElementById('wrap');
      const iframe = document.getElementById('preview');

      function applyScale(){
        const frameWidth = device.clientWidth - 24; // inner padding approx (12px each side)
        const scale = Math.min(1, frameWidth / BASE_W);
        iframe.style.transform = `scale(${scale})`;

        try {
          const doc = iframe.contentDocument || iframe.contentWindow.document;
          const fullHeight = Math.max(
            doc.documentElement.scrollHeight,
            doc.body ? doc.body.scrollHeight : 0
          );
          // We need to set the iframe height to the unscaled height so that after scaling it fills the frame
          iframe.style.height = fullHeight + 'px';
          // Ensure the wrapper scrolls through the scaled content height
          wrap.scrollTop = 0;
        } catch (e) {
          // If cross-origin (shouldn't be in CRA dev), fallback to a large height
          iframe.style.height = (2000) + 'px';
        }
      }

      iframe.addEventListener('load', applyScale);
      window.addEventListener('resize', applyScale);
      // In case the app dynamically changes height
      setInterval(applyScale, 800);
    })();
  </script>
</body>
</html>
